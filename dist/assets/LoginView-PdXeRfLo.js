import{V as I,a as j,_ as E,b as x,f as d,c as R}from"./VTextField-KuveOSAe.js";import{y as z,r as u,u as T,z as $,B as g,C as q,e as v,i as A,d as e,w as s,f as w,E as S,k as a,D as y,F as U,v as r,l as h,V as K}from"./index-8TxKCO8e.js";import{_ as M}from"./NotificacionEstado-qFdFHY4D.js";import{V as b,b as O,c as P,d as G}from"./VCard-paBMn9Wn.js";import{V as H}from"./index-hzE6LT8Q.js";import{V as J}from"./VContainer-qKTR7Mb1.js";import{V as _}from"./VBtn-TV862Wp4.js";import"./VRow-Ose8_e84.js";const Q={class:"d-flex justify-center flex-column align-center mb-5 mt-9"},W={class:"d-flex justify-center mb-5 mt-9"},X={class:"mt-4 mb-5 text-center",color:"red"},Y={class:"cursor-pointer"},Z=r("br",null,null,-1),ee=r("br",null,null,-1),te=r("strong",null,null,-1),ce={__name:"LoginView",setup(ae){const C=z(),V=u(),p=T();let n=$({username:"",password:""}),k=u(!1),c=u(!0);const m=u({username:"",password:""});let f=!1;g(()=>p.user);let l=u({dialog:!1,tipo:""});const D=g(()=>!!l.value);q(n,t=>{c=!0,t.password.length>0&&t.username&&V.value.validate().then(o=>{o.valid?c=!1:c=!0})});const L=g(()=>p.isLoggedIn);async function B(){if(k){f=!0;try{await p.login(n),n={username:"",password:""},C.push({name:"paises"})}catch(t){console.error("Error",t.response),m.value.username="Datos incorrectos o inválidos",m.value.password="Revisa tu contraseña o sigue el procedimiento para reiniciarla",t.response&&t.response.status==401&&t.response.data&&t.response.data.code&&t.response.data.code!="credentials_error"&&(l.value.tipo=t.response.data.code,l.value.dialog=!0)}f=!1}}function N(t){/[0-9]/.test(t.key)||t.preventDefault()}const F=()=>{l.value.dialog=!1};return(t,o)=>(v(),A(U,null,[e(b,null,{default:s(()=>[e(H,null,{default:s(()=>[e(I,{color:"background",permanent:"",location:"right",width:"704",elevation:1,id:"navigation-drawer-br-radius"},{default:s(()=>[e(O,{"min-width":"340","min-height":"510"},{default:s(()=>[e(j,{density:"compact",nav:"",class:"d-flex align-center justify-center",style:{height:"100vh"}},{default:s(()=>[e(b,{width:"461",height:"762",class:"rounded-xl mt-8 pt-8",elevation:1},{default:s(()=>[e(P,{class:"d-flex align-center justify-center mt-5"},{default:s(()=>[e(G,{image:E,rounded:"0",size:"80"})]),_:1}),e(J,null,{default:s(()=>[L.value?y("",!0):(v(),w(R,{key:0,ref_key:"loginForm",ref:V},{default:s(()=>[e(x,{max:"5",class:"custom-hint-color mb-8",modelValue:a(n).username,"onUpdate:modelValue":o[0]||(o[0]=i=>a(n).username=i),variant:"outlined",placeholder:"Corporativo","persistent-hint":"",maxlength:5,type:"tel",flat:"",hint:"Ingresa tu número corporativo",rules:[a(d).required,a(d).isInteger,a(d).minLength(5),a(d).maxLength(5)],"error-messages":m.value.username,onKeypress:N},null,8,["modelValue","rules","error-messages"]),e(x,{class:"custom-hint-color mb-5",modelValue:a(n).password,"onUpdate:modelValue":o[1]||(o[1]=i=>a(n).password=i),placeholder:"Contraseña","persistent-hint":"",flat:"",type:"password",variant:"outlined",hint:"Ingresa tu contraseña",rules:[a(d).required],"error-messages":m.value.password},null,8,["modelValue","rules","error-messages"]),r("div",Q,[r("strong",null,[e(_,{variant:"text",class:"text-secondary text-decoration-none text-none font-weigth-bold cursor-pointer",onClick:o[2]||(o[2]=i=>(a(l).tipo="olvide_password",a(l).dialog=!0))},{default:s(()=>[h(" ¿Olvidaste tu contraseña?")]),_:1})])]),r("div",W,[e(_,{onClick:o[3]||(o[3]=i=>B()),class:"text-none",rounded:"xl",color:"secondary",size:"x-large",width:"25vh",loading:a(f),disabled:a(c)},{default:s(()=>[h(" Ingresar ")]),_:1},8,["loading","disabled"])]),r("div",X,[r("strong",Y,[e(_,{variant:"text",class:"text-secondary text-none text-decoration-none font-weigth-bold"},{default:s(()=>[h(" ¿No cuentas con usuario? ")]),_:1})]),Z,ee,te])]),_:1},512))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{class:"bg-login"})]),_:1})]),_:1}),D.value?(v(),w(M,S({key:0},a(l),{onCerrarDialogo:F}),null,16)):y("",!0)],64))}};export{ce as default};
