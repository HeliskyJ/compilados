import{_ as F,ao as I,r as l,e as R,ap as h,C as v,X as q,am as A,f as V,j as T,d as e,w as t,h as z,n as x,l as o,aa as E,F as M,y as s,s as w,V as S}from"./index-kKdGCNTv.js";import{j as U,e as H,_ as K,d as y}from"./VNavigationDrawer-mhgLr_4z.js";import{V as O,f as u}from"./VForm-gsmbMxCf.js";import{D as P}from"./NotificacionEstado-A07MSrjb.js";import{B as X}from"./BotonBi-aYjw3oQ-.js";import{V as b,c as G,d as J,b as Q,a as W}from"./VCard-BF-vllR0.js";import{V as Y}from"./VLayout-ueVDUMp-.js";import{V as Z}from"./VContainer-mYOJDngs.js";import{V as $}from"./VGrid-hx-kg6fk.js";import"./index-Y5RnL3hI.js";import"./VOverlay-M3ELfG5G.js";import"./delay-G9-9mLFc.js";import"./VRow-0Z9k1ICL.js";const ee={class:"d-flex justify-center flex-column align-center mb-5 mt-9"},ae={class:"mt-4 mb-5 text-center",color:"red"},te=s("span",{class:"text-secondary text-none"}," ¿No cuentas con usuario? ",-1),oe=s("br",null,null,-1),se=s("br",null,null,-1),re={__name:"LoginView",setup(ne){const C=I(),m=l(),p=R();let r=h({username:"",password:""}),k=l(!1),d=l(!0);const c=l({username:"",password:""});let f=l(!1);v(()=>p.user);let i=l({dialog:!1,tipo:""}),B=h({cargando:f,deshabilitado:d,valorBtn:"Ingresar"});const D=v(()=>!!i.value);q(r,a=>{d.value=!0,a.password.length>0&&a.username&&m.value.validate().then(n=>{n.valid?d.value=!1:d.value=!0})}),v(()=>p.isLoggedIn);async function L(){if(f.value=!0,k)try{await p.login(r),m.value.reset,C.push({name:"paises"})}catch(a){c.value.username="Datos incorrectos o inválidos",c.value.password="Revisa tu contraseña o sigue el procedimiento para reiniciarla",a.response&&a.response.status==401&&a.response.data&&a.response.data.code&&a.response.data.code!="credentials_error"&&(i.value.tipo=a.response.data.code,i.value.dialog=!0)}f.value=!1}function j(a){/[0-9]/.test(a.key)||a.preventDefault()}const N=()=>{i.value.dialog=!1};return(a,n)=>{const _=A("router-link");return V(),T(M,null,[e(b,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(U,{color:"background",permanent:"",location:"right",width:"704",elevation:1,id:"navigation-drawer-br-radius"},{default:t(()=>[e(G,{"min-width":"340","min-height":"510"},{default:t(()=>[e(H,{density:"compact",nav:"",class:"d-flex align-center justify-center",style:{height:"100vh"}},{default:t(()=>[e(b,{width:"461",height:"762",class:"rounded-xl mt-8 pt-8",elevation:1},{default:t(()=>[e(J,{class:"d-flex align-center justify-center mt-5"},{default:t(()=>[e(Q,{size:"80",rounded:"0"},{default:t(()=>[e(W,{src:K})]),_:1})]),_:1}),e(Z,null,{default:t(()=>[e(O,{ref_key:"loginForm",ref:m},{default:t(()=>[e(y,{max:"5",class:"custom-hint-color mb-8",modelValue:o(r).username,"onUpdate:modelValue":n[0]||(n[0]=g=>o(r).username=g),variant:"outlined",placeholder:"Corporativo","persistent-hint":"",maxlength:5,type:"tel",flat:"",hint:"Ingresa tu número corporativo",rules:[o(u).required,o(u).isInteger,o(u).minLength(5),o(u).maxLength(5)],"error-messages":c.value.username,onKeypress:j},null,8,["modelValue","rules","error-messages"]),e(y,{class:"custom-hint-color mb-5",modelValue:o(r).password,"onUpdate:modelValue":n[1]||(n[1]=g=>o(r).password=g),placeholder:"Contraseña","persistent-hint":"",flat:"",type:"password",variant:"outlined",hint:"Ingresa tu contraseña",rules:[o(u).required],"error-messages":c.value.password},null,8,["modelValue","rules","error-messages"]),s("div",ee,[s("strong",null,[e(_,{to:{name:"olvide_credenciales"}},{default:t(()=>[e($,{variant:"text",class:"text-secondary text-decoration-none text-none font-weigth-bold cursor-pointer"},{default:t(()=>[w(" ¿Olvidaste tu contraseña?")]),_:1})]),_:1})])]),e(X,x(o(B),{onAccion:L}),null,16),s("div",ae,[te,oe,se,s("strong",null,[e(_,{to:{name:"solicitud_acceso"},class:"text-secondary text-decoration-none font-weigth-bold"},{default:t(()=>[w("Haz click aquí para hacer tu solicitud de usuario nuevo")]),_:1})])])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{class:"bg-login"})]),_:1})]),_:1}),D.value?(V(),z(P,x({key:0},o(i),{onCerrarDialogo:N}),null,16)):E("v-if",!0)],64)}}},xe=F(re,[["__file","/home/projects/abastecimiento-app/frontend/src/pages/autenticacion/LoginView.vue"]]);export{xe as default};
