import{V as j,a as R,_ as z,b as x,f as i,c as E}from"./VTextField-6Uh1m6AQ.js";import{y as T,r as d,u as q,z as A,B as g,C as S,E as U,e as v,i as $,d as e,w as a,f as w,G,k as s,D as y,F as K,v as r,l as _,V as M}from"./index-8OeT41xY.js";import{_ as O}from"./NotificacionEstado-UBh2B94q.js";import{V as b,b as P,c as H,d as J}from"./VCard-aPhAqH5Q.js";import{V as Q}from"./index-x7ymgcsx.js";import{V as W}from"./VContainer-s4yXFdMn.js";import{V as h}from"./VBtn-xcubdz3h.js";import"./VRow-50ycxku-.js";const X={class:"d-flex justify-center flex-column align-center mb-5 mt-9"},Y={class:"d-flex justify-center mb-5 mt-9"},Z={class:"mt-4 mb-5 text-center",color:"red"},ee={class:"cursor-pointer"},te=r("br",null,null,-1),ae=r("br",null,null,-1),se=r("strong",null,null,-1),pe={__name:"LoginView",setup(oe){const k=T(),V=d(),p=q();let n=A({username:"",password:""}),C=d(!1),u=d(!0);const c=d({username:"",password:""});let f=!1;g(()=>p.user);let l=d({dialog:!1,tipo:""});const D=g(()=>!!l.value);S(n,t=>{u=!0,t.password.length>0&&t.username&&V.value.validate().then(o=>{o.valid?u=!1:u=!0})});const L=g(()=>p.isLoggedIn);async function B(){if(C){f=!0;try{await p.login(n),n={username:"",password:""},k.push({name:"paises"})}catch(t){c.value.username="Datos incorrectos o inválidos",c.value.password="Revisa tu contraseña o sigue el procedimiento para reiniciarla",t.response&&t.response.status==401&&t.response.data&&t.response.data.code&&t.response.data.code!="credentials_error"&&(l.value.tipo=t.response.data.code,l.value.dialog=!0)}f=!1}}function N(t){/[0-9]/.test(t.key)||t.preventDefault()}const F=()=>{l.value.dialog=!1};return(t,o)=>{const I=U("router-link");return v(),$(K,null,[e(b,null,{default:a(()=>[e(Q,null,{default:a(()=>[e(j,{color:"background",permanent:"",location:"right",width:"704",elevation:1,id:"navigation-drawer-br-radius"},{default:a(()=>[e(P,{"min-width":"340","min-height":"510"},{default:a(()=>[e(R,{density:"compact",nav:"",class:"d-flex align-center justify-center",style:{height:"100vh"}},{default:a(()=>[e(b,{width:"461",height:"762",class:"rounded-xl mt-8 pt-8",elevation:1},{default:a(()=>[e(H,{class:"d-flex align-center justify-center mt-5"},{default:a(()=>[e(J,{image:z,rounded:"0",size:"80"})]),_:1}),e(W,null,{default:a(()=>[L.value?y("",!0):(v(),w(E,{key:0,ref_key:"loginForm",ref:V},{default:a(()=>[e(x,{max:"5",class:"custom-hint-color mb-8",modelValue:s(n).username,"onUpdate:modelValue":o[0]||(o[0]=m=>s(n).username=m),variant:"outlined",placeholder:"Corporativo","persistent-hint":"",maxlength:5,type:"tel",flat:"",hint:"Ingresa tu número corporativo",rules:[s(i).required,s(i).isInteger,s(i).minLength(5),s(i).maxLength(5)],"error-messages":c.value.username,onKeypress:N},null,8,["modelValue","rules","error-messages"]),e(x,{class:"custom-hint-color mb-5",modelValue:s(n).password,"onUpdate:modelValue":o[1]||(o[1]=m=>s(n).password=m),placeholder:"Contraseña","persistent-hint":"",flat:"",type:"password",variant:"outlined",hint:"Ingresa tu contraseña",rules:[s(i).required],"error-messages":c.value.password},null,8,["modelValue","rules","error-messages"]),r("div",X,[r("strong",null,[e(I,{to:{name:"olvide_credenciales"}},{default:a(()=>[e(h,{variant:"text",class:"text-secondary text-decoration-none text-none font-weigth-bold cursor-pointer"},{default:a(()=>[_(" ¿Olvidaste tu contraseña?")]),_:1})]),_:1})])]),r("div",Y,[e(h,{onClick:o[2]||(o[2]=m=>B()),class:"text-none",rounded:"xl",color:"secondary",size:"x-large",width:"25vh",loading:s(f),disabled:s(u)},{default:a(()=>[_(" Ingresar ")]),_:1},8,["loading","disabled"])]),r("div",Z,[r("strong",ee,[e(h,{variant:"text",class:"text-secondary text-none text-decoration-none font-weigth-bold"},{default:a(()=>[_(" ¿No cuentas con usuario? ")]),_:1})]),te,ae,se])]),_:1},512))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{class:"bg-login"})]),_:1})]),_:1}),D.value?(v(),w(O,G({key:0},s(l),{onCerrarDialogo:F}),null,16)):y("",!0)],64)}}};export{pe as default};
